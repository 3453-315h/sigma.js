!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Sigma=e():t.Sigma=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=21)}([function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return l}));var r=n(2);function i(t){if(void 0!==t.offsetX)return t.offsetX;if(void 0!==t.layerX)return t.layerX;if(void 0!==t.clientX)return t.clientX;throw new Error("sigma/captors/utils.getX: could not extract x from event.")}function o(t){if(void 0!==t.offsetY)return t.offsetY;if(void 0!==t.layerY)return t.layerY;if(void 0!==t.clientY)return t.clientY;throw new Error("sigma/captors/utils.getY: could not extract y from event.")}function a(t){var e=t.target.ownerSVGElement?t.target.ownerSVGElement.width:t.target.width;if("number"==typeof e)return e;if(void 0!==e&&void 0!==e.baseVal)return e.baseVal.value;throw new Error("sigma/captors/utils.getWidth: could not extract width from event.")}function s(t){var e=t.target.ownerSVGElement?t.target.ownerSVGElement.height:t.target.height;if("number"==typeof e)return e;if(void 0!==e&&void 0!==e.baseVal)return e.baseVal.value;throw new Error("sigma/captors/utils.getHeight: could not extract height from event.")}function c(t){var e=-1!==t.target.namespaceURI.indexOf("svg")?1:Object(r.c)();return{x:a(t)/(2*e),y:s(t)/(2*e)}}function u(t){return{x:i(t),y:o(t),clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,shiftKey:t.shiftKey}}function l(t){if(void 0!==t.wheelDelta)return t.wheelDelta/360;if(void 0!==t.detail)return t.detail/-9;throw new Error("sigma/captors/utils.getDelta: could not extract delta from event.")}},function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"linear",(function(){return o})),n.d(r,"quadraticIn",(function(){return a})),n.d(r,"quadraticOut",(function(){return s})),n.d(r,"quadraticInOut",(function(){return c})),n.d(r,"cubicIn",(function(){return u})),n.d(r,"cubicOut",(function(){return l})),n.d(r,"cubicInOut",(function(){return h}));var i=n(3),o=function(t){return t},a=function(t){return t*t},s=function(t){return t*(2-t)},c=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},u=function(t){return t*t*t},l=function(t){return--t*t*t+1},h=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},f=n(5);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return b}));var g={easing:"quadraticInOut",duration:150},b=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=y(this,v(e).call(this))).x=.5,t.y=.5,t.angle=0,t.ratio=1,t.nextFrame=null,t.previousState=t.getState(),t.enabled=!0,t}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(e,t),n=e,(i=[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"getPreviousState",value:function(){var t=this.previousState;return{x:t.x,y:t.y,angle:t.angle,ratio:t.ratio}}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"graphToViewport",value:function(t,e,n){var r=Math.min(t.width,t.height),i=r/t.width,o=r/t.height;return{x:(e-this.x+this.ratio/2/i)*(r/this.ratio),y:(this.y-n+this.ratio/2/o)*(r/this.ratio)}}},{key:"viewportToGraph",value:function(t,e,n){var r=Math.min(t.width,t.height),i=r/t.width,o=r/t.height;return{x:this.ratio/r*e+this.x-this.ratio/2/i,y:-(this.ratio/r*n-this.y-this.ratio/2/o)}}},{key:"viewRectangle",value:function(t){var e=0*t.width/8,n=0*t.height/8,r=this.viewportToGraph(t,0-e,0-n),i=this.viewportToGraph(t,t.width+e,0-n),o=this.viewportToGraph(t,0,t.height+n);return{x1:r.x,y1:r.y,x2:i.x,y2:i.y,height:i.y-o.y}}},{key:"setState",value:function(t){return this.enabled?(this.previousState=this.getState(),"x"in t&&(this.x=t.x),"y"in t&&(this.y=t.y),"angle"in t&&(this.angle=t.angle),"ratio"in t&&(this.ratio=t.ratio),this.emit("updated",this.getState()),this):this}},{key:"animate",value:function(t,e,n){var i=this;if(!this.enabled)return this;var o="function"==typeof(e=Object(f.a)({},g,e)).easing?e.easing:r[e.easing];this.nextFrame&&cancelAnimationFrame(this.nextFrame);var a=Date.now(),s=this.getState(),c=function r(){var c=(Date.now()-a)/e.duration;if(c>=1)return i.nextFrame=null,i.setState(t),void("function"==typeof n&&n());var u=o(c),l={};"x"in t&&(l.x=s.x+(t.x-s.x)*u),"y"in t&&(l.y=s.y+(t.y-s.y)*u),"angle"in t&&(l.angle=s.angle+(t.angle-s.angle)*u),"ratio"in t&&(l.ratio=s.ratio+(t.ratio-s.ratio)*u),i.setState(l),i.nextFrame=requestAnimationFrame(r)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.nextFrame=requestAnimationFrame(c)):c()}},{key:"animatedZoom",value:function(t){return t?"number"==typeof t?this.animate({ratio:this.ratio/t}):this.animate({ratio:this.ratio/(t.factor||1.5)},t):this.animate({ratio:this.ratio/1.5})}},{key:"animatedUnzoom",value:function(t){return t?"number"==typeof t?this.animate({ratio:this.ratio*t}):this.animate({ratio:this.ratio*(t.factor||1.5)},t):this.animate({ratio:1.5*this.ratio})}},{key:"animatedReset",value:function(t){return this.animate({x:.5,y:.5,ratio:1,angle:0},t)}}])&&p(n.prototype,i),o&&p(n,o),e}(i.EventEmitter)},function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t,e){var n=document.createElement(t);if(!e)return n;for(var r in e)if("style"===r)for(var i in e[r])n.style[i]=e[r][i];else n.setAttribute(r,e[r]);return n}function o(){var t=window.screen;return void 0!==t.deviceXDPI&&void 0!==t.logicalXDPI&&t.deviceXDPI>t.logicalXDPI?t.systemXDPI/t.logicalXDPI:void 0!==window.devicePixelRatio?window.devicePixelRatio:1}function a(t){var e=r(t.x,2),n=e[0],i=e[1],o=r(t.y,2),a=o[0],s=o[1],c=Math.max(i-n,s-a);0===c&&(c=1);var u=(i+n)/2,l=(s+a)/2,h=function(t){return{x:.5+(t.x-u)/c,y:.5+(t.y-l)/c}};return h.applyTo=function(t){t.x=.5+(t.x-u)/c,t.y=.5+(t.y-l)/c},h.inverse=function(t){return{x:u+c*(t.x-.5),y:l+c*(t.y-.5)}},h.ratio=c,h}n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return a}))},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function u(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function l(t,e,n,r){var i,o,a,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=u(t))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return t}function h(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,t))}function f(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function d(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):y(i,i.length)}function p(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[t];if(void 0===c)return!1;if("function"==typeof c)o(c,this,e);else{var u=c.length,l=y(c,u);for(n=0;n<u;++n)o(l[n],this,e)}return!0},s.prototype.addListener=function(t,e){return l(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return l(this,t,e,!0)},s.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,f(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,f(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return h}));var r=n(1),i=n(11),o=n(0);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(e){function n(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(r=function(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?u(t):e}(this,c(n).call(this,t,e))).container=t,r.camera=e,r.enabled=!0,r.hasDragged=!1,r.downStartTime=null,r.lastMouseX=null,r.lastMouseY=null,r.isMouseDown=!1,r.isMoving=!1,r.movingTimeout=null,r.startCameraState=null,r.lastCameraState=null,r.clicks=0,r.doubleClickTimeout=null,r.wheelLock=!1,r.handleClick=r.handleClick.bind(u(r)),r.handleDown=r.handleDown.bind(u(r)),r.handleUp=r.handleUp.bind(u(r)),r.handleMove=r.handleMove.bind(u(r)),r.handleWheel=r.handleWheel.bind(u(r)),r.handleOut=r.handleOut.bind(u(r)),t.addEventListener("click",r.handleClick,!1),t.addEventListener("mousedown",r.handleDown,!1),t.addEventListener("mousemove",r.handleMove,!1),t.addEventListener("DOMMouseScroll",r.handleWheel,!1),t.addEventListener("mousewheel",r.handleWheel,!1),t.addEventListener("mouseout",r.handleOut,!1),document.addEventListener("mouseup",r.handleUp,!1),r}var i,h,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(n,e),i=n,(h=[{key:"kill",value:function(){var t=this.container;t.removeEventListener("click",this.handleClick),t.removeEventListener("mousedown",this.handleDown),t.removeEventListener("mousemove",this.handleMove),t.removeEventListener("DOMMouseScroll",this.handleWheel),t.removeEventListener("mousewheel",this.handleWheel),t.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(t){var e=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null,this.handleDoubleClick(t);setTimeout((function(){e.clicks=0,e.doubleClickTimeout=null}),300),this.hasDragged||this.emit("click",Object(o.b)(t))}}},{key:"handleDoubleClick",value:function(t){if(this.enabled){var e=Object(o.a)(t),n=this.camera.getState(),i=n.ratio/2.2,a={width:this.container.offsetWidth,height:this.container.offsetHeight},s=Object(o.d)(t),c=Object(o.e)(t),u=new r.a;u.ratio=i,u.x=n.x,u.y=n.y;var l=this.camera.viewportToGraph(a,s,c),h=this.camera.viewportToGraph(a,e.x,e.y),f=u.viewportToGraph(a,s,c),d=u.viewportToGraph(a,e.x,e.y),p=f.x-d.x-l.x+h.x,y=f.y-d.y-l.y+h.y;return this.camera.animate({x:n.x-p,y:n.y-y,ratio:i},{easing:"quadraticInOut",duration:200}),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1}}},{key:"handleDown",value:function(t){this.enabled&&(this.startCameraState=this.camera.getState(),this.lastCameraState=this.startCameraState,this.lastMouseX=Object(o.d)(t),this.lastMouseY=Object(o.e)(t),this.hasDragged=!1,this.downStartTime=Date.now(),t.which,this.isMouseDown=!0,this.emit("mousedown",Object(o.b)(t)))}},{key:"handleUp",value:function(e){var n=this;if(this.enabled&&this.isMouseDown){this.isMouseDown=!1,this.movingTimeout&&(this.movingTimeout=null,clearTimeout(this.movingTimeout));var r=Object(o.d)(e),i=Object(o.e)(e),a=this.camera.getState(),s=this.camera.getPreviousState();this.isMoving?this.camera.animate({x:a.x+3*(a.x-s.x),y:a.y+3*(a.y-s.y)},{duration:200,easing:"quadraticOut"}):this.lastMouseX===r&&this.lastMouseY===i||this.camera.setState({x:a.x,y:a.y}),this.isMoving=!1,t((function(){return n.hasDragged=!1})),this.emit("mouseup",Object(o.b)(e))}}},{key:"handleMove",value:function(t){var e=this;if(this.enabled){if(this.emit("mousemove",Object(o.b)(t)),this.isMouseDown){this.isMoving=!0,this.hasDragged=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=setTimeout((function(){e.movingTimeout=null,e.isMoving=!1}),200);var n={width:this.container.offsetWidth,height:this.container.offsetHeight},r=Object(o.d)(t),i=Object(o.e)(t),a=this.camera.viewportToGraph(n,this.lastMouseX,this.lastMouseY),s=this.camera.viewportToGraph(n,r,i),c=a.x-s.x,u=a.y-s.y,l=this.camera.getState(),h=l.x+c,f=l.y+u;this.camera.setState({x:h,y:f}),this.lastMouseX=r,this.lastMouseY=i}return t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1}}},{key:"handleWheel",value:function(t){var e=this;if(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!this.enabled)return!1;var n=Object(o.c)(t);if(!n)return!1;if(this.wheelLock)return!1;this.wheelLock=!0;var i=n>0?1/1.7:1.7,a=this.camera.getState(),s=i*a.ratio,c=Object(o.a)(t),u={width:this.container.offsetWidth,height:this.container.offsetHeight},l=Object(o.d)(t),h=Object(o.e)(t),f=new r.a;f.ratio=s,f.x=a.x,f.y=a.y;var d=this.camera.viewportToGraph(u,l,h),p=this.camera.viewportToGraph(u,c.x,c.y),y=f.viewportToGraph(u,l,h),v=f.viewportToGraph(u,c.x,c.y),m=y.x-v.x-d.x+p.x,g=y.y-v.y-d.y+p.y;return this.camera.animate({x:a.x-m,y:a.y-g,ratio:s},{easing:"linear",duration:200},(function(){return e.wheelLock=!1})),!1}},{key:"handleOut",value:function(){}}])&&s(i.prototype,h),f&&s(i,f),n}(i.a)}).call(this,n(18).setImmediate)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return"object"===r(t)&&null!==t&&t.constructor===Object}function o(t){t=t||{};for(var e=0,n=arguments.length<=1?0:arguments.length-1;e<n;e++){var r=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];if(r)for(var a in r)i(r[a])?t[a]=o(t[a],r[a]):t[a]=r[a]}return t}n.d(e,"a",(function(){return o}))},function(t,e){t.exports="precision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float feather = 2.6;\nconst vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, color0, t);\n}\n"},function(t,e){t.exports=function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.addUndirectedEdgeWithKey&&"function"==typeof t.dropNode&&"boolean"==typeof t.multi}},function(t,e,n){var r=n(7);function i(t,e){if(!r(t))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var n,i,o,a,s,c,u,l=[].concat(e),h=t.nodes(),f={};for(s=0;s<l.length;s++)f[a=l[s]]=[1/0,-1/0];for(c=0,u=h.length;c<u;c++)for(n=h[c],i=t.getNodeAttributes(n),s=0;s<l.length;s++)(o=i[a=l[s]])<f[a][0]&&(f[a][0]=o),o>f[a][1]&&(f[a][1]=o);return"string"==typeof e?f[e]:f}var o=i;o.nodeExtent=i,o.edgeExtent=function(t,e){if(!r(t))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var n,i,o,a,s,c,u,l=[].concat(e),h=t.edges(),f={};for(s=0;s<l.length;s++)f[a=l[s]]=[1/0,-1/0];for(c=0,u=h.length;c<u;c++)for(n=h[c],i=t.getEdgeAttributes(n),s=0;s<l.length;s++)(o=i[a=l[s]])<f[a][0]&&(f[a][0]=o),o>f[a][1]&&(f[a][1]=o);return"string"==typeof e?f[e]:f},t.exports=o},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t,e){var n=t.length,r=e.length;if(0!==r){t.length+=e.length;for(var i=0;i<r;i++)t[n+i]=e[i]}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(3);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=o(this,a(e).call(this))).container=t,r.camera=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,t),e}(r.EventEmitter)},function(t,e){t.exports="attribute vec2 a_position;\nattribute float a_size;\nattribute vec4 a_color;\n\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\n\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n"},function(t,e){t.exports="precision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float radius = 0.5;\n\nvoid main(void) {\n  vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\n  float dist = radius - length(m);\n\n  float t = 0.0;\n  if (dist > v_border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / v_border;\n\n  // gl_FragColor = mix(color0, v_color, t);\n  gl_FragColor = mix(color0, v_color, t);\n}\n"},function(t,e){t.exports="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_thickness;\nattribute vec4 a_color;\n\nuniform vec2 u_resolution;\nuniform float u_ratio;\nuniform mat3 u_matrix;\nuniform float u_scale;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float min_thickness = 1.8;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n\n  // Computing thickness in pixels\n  float pow_ratio = 1.0 / pow(u_ratio, 0.5);\n  float thickness = a_thickness * pow_ratio / u_scale;\n\n  // Min thickness for AA\n  thickness = max(min_thickness, thickness);\n\n  // Computing delta relative to viewport\n  vec2 delta = (a_normal * thickness) / u_resolution;\n\n  vec2 position = (u_matrix * vec3(a_position, 1)).xy;\n  position += delta;\n\n  // Applying\n  gl_Position = vec4(position, 0, 1);\n\n  v_normal = a_normal;\n  v_thickness = thickness;\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n"},function(t,e){t.exports="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_thickness;\nattribute float a_radius;\nattribute vec4 a_color;\nattribute vec3 a_barycentric;\n\nuniform vec2 u_resolution;\nuniform float u_ratio;\nuniform mat3 u_matrix;\nuniform float u_scale;\n\nvarying vec4 v_color;\n// varying vec3 v_barycentric;\n\nconst float arrow_ratio = 0.66;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  float pow_ratio = 1.0 / pow(u_ratio, 0.5) * 2.0;\n  float radius = (a_radius - 1.0) * pow_ratio;\n  float thickness = a_thickness * pow_ratio / u_scale;\n  float width = arrow_ratio * thickness / 2.0;\n\n  vec2 delta = vec2(\n      da * ((radius) * a_normal.y)\n    + db * ((radius + thickness) * a_normal.y + width * a_normal.x)\n    + dc * ((radius + thickness) * a_normal.y - width * a_normal.x),\n\n      da * (-(radius) * a_normal.x)\n    + db * (-(radius + thickness) * a_normal.x + width * a_normal.y)\n    + dc * (-(radius + thickness) * a_normal.x - width * a_normal.y)\n  );\n\n  delta /= u_resolution;\n\n  // Scale from [[-1 1] [-1 1]] to the container:\n  vec2 position = (u_matrix * vec3(a_position, 1)).xy;\n  position += delta;\n\n  // Applying\n  gl_Position = vec4(position, 0, 1);\n\n  // v_barycentric = a_barycentric;\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n"},function(t,e){t.exports="precision mediump float;\n\nvarying vec4 v_color;\n// varying vec3 v_barycentric;\n\nvoid main(void) {\n  // if (any(lessThan(v_barycentric, vec3(0.01))))\n  //   discard;\n  // else\n    gl_FragColor = v_color;\n}\n"},function(t,e){t.exports="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_thickness;\nattribute vec4 a_color;\nattribute float a_radius;\n\nuniform vec2 u_resolution;\nuniform float u_ratio;\nuniform mat3 u_matrix;\nuniform float u_scale;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float min_thickness = 1.8;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n\n  // Computing thickness in pixels\n  float pow_ratio = 1.0 / pow(u_ratio, 0.5);\n  float thickness = a_thickness * pow_ratio / u_scale;\n\n  // Min thickness for AA\n  thickness = max(min_thickness, thickness);\n\n  // Arrow margin\n  // NOTE: it seems we don't need a constant margin into the arrow\n  float arrow_pow_ratio = pow_ratio * 2.0;\n  float radius = abs(a_radius) * arrow_pow_ratio;\n  float arrow_thickness = max(a_thickness * 2.5, 5.0) * arrow_pow_ratio / u_scale;\n  float margin = radius + arrow_thickness - arrow_pow_ratio;\n  float direction = sign(a_radius);\n  vec2 pnormal = vec2(-direction * a_normal.y, direction * a_normal.x);\n\n  // Computing delta relative to viewport\n  vec2 delta = (a_normal * thickness) / u_resolution;\n  vec2 clamped = (pnormal * margin) / u_resolution;\n\n  vec2 position = (u_matrix * vec3(a_position, 1)).xy;\n  position += delta + clamped;\n\n  // Applying\n  gl_Position = vec4(position, 0, 1);\n\n  v_normal = a_normal;\n  v_thickness = thickness;\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n"},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(19),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(9))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,c=1,u={},l=!1,h=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(t){var e=h.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return u[c]=i,r(c),c++},f.clearImmediate=d}function d(t){delete u[t]}function p(t){if(l)setTimeout(p,0,t);else{var e=u[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{d(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(9),n(20))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,u=[],l=!1,h=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&d())}function d(){if(!l){var t=s(f);l=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e);var c=function(t){function e(){return i(this,e),o(this,a(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,t),e}(n(3).EventEmitter),u=n(1),l=n(10),h=n.n(l);function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n,r,i,o,a){return t<r+o&&t+n>r&&e<i+a&&e+n>i}function p(t,e,n,r,i,o,a,s){return t<i+a&&t+n>i&&e<o+s&&e+r>o}function y(t,e,n,r,i,o){var a=t<n+i/2;return e<r+o/2?a?1:2:a?3:4}var v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{};var n=Math.pow(4,5);this.data=new Float32Array((4*n-1)/3*4),this.containers={},this.cache=null,this.lastRectangle=null,e.boundaries?this.resize(e.boundaries):this.resize({x:0,y:0,width:1,height:1}),"function"==typeof e.filter&&(this.nodeFilter=e.filter)}var e,n,r;return e=t,(n=[{key:"add",value:function(t,e,n,r){return function(t,e,n,r,i,o,a){for(var s=i-a,c=o-a,u=2*a,l=0,h=0;;){if(l>=t)return n[h]=n[h]||[],void n[h].push(r);var f=4*h+4,p=4*h+8,y=4*h+12,v=4*h+16,m=d(s,c,u,e[f+0],e[f+1],e[f+2],e[f+3]),g=d(s,c,u,e[p+0],e[p+1],e[p+2],e[p+3]),b=d(s,c,u,e[y+0],e[y+1],e[y+2],e[y+3]),w=d(s,c,u,e[v+0],e[v+1],e[v+2],e[v+3]),_=m+g+b+w;if(0===_)throw new Error("sigma/quadtree.insertNode: no collision (level: ".concat(l,", key: ").concat(r,", x: ").concat(i,", y: ").concat(o,", size: ").concat(a,")."));if(3===_)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: ".concat(l,", key: ").concat(r,", x: ").concat(i,", y: ").concat(o,", size: ").concat(a,")."));if(_>1)return n[h]=n[h]||[],void n[h].push(r);l++,m&&(h=f),g&&(h=p),b&&(h=y),w&&(h=v)}}(5,this.data,this.containers,t,e,n,r),this}},{key:"resize",value:function(t){this.clear(),this.data[0]=t.x,this.data[1]=t.y,this.data[2]=t.width,this.data[3]=t.height,function(t,e){for(var n=[0,0];n.length;){var r=n.pop(),i=n.pop(),o=4*i+4,a=4*i+8,s=4*i+12,c=4*i+16,u=e[i+0],l=e[i+1],h=e[i+2]/2,f=e[i+3]/2;e[o+0]=u,e[o+1]=l,e[o+2]=h,e[o+3]=f,e[a+0]=u+h,e[a+1]=l,e[a+2]=h,e[a+3]=f,e[s+0]=u,e[s+1]=l+f,e[s+2]=h,e[s+3]=f,e[c+0]=u+h,e[c+1]=l+f,e[c+2]=h,e[c+3]=f,r<t-1&&(n.push(c,r+1),n.push(s,r+1),n.push(a,r+1),n.push(o,r+1))}}(5,this.data)}},{key:"clear",value:function(){return this.containers={},this}},{key:"point",value:function(t,e){var n=[],r=0,i=0;do{this.containers[r]&&n.push.apply(n,this.containers[r]),r=4*r+4*y(t,e,this.data[r+0],this.data[r+1],this.data[r+2],this.data[r+3]),i++}while(i<=5);return n}},{key:"rectangle",value:function(t,e,n,r,i){var o=this.lastRectangle;if(o&&t===o.x1&&n===o.x2&&e===o.y1&&r===o.y2&&i===o.height)return this.cache;if(this.lastRectangle={x1:t,y1:e,x2:n,y2:r,height:i},!function(t,e,n,r){return t===n||e===r}(t,e,n,r))throw new Error("sigma/quadtree.rectangle: shifted view is not yet implemented.");var a=function(t,e,n,r,i,o,a){for(var s,c=[0,0],u=[];c.length;){var l=c.pop(),f=c.pop();if((s=n[f])&&h()(u,s),!(l>=t)){var d=4*f+4,y=4*f+8,v=4*f+12,m=4*f+16,g=p(r,i,o,a,e[d+0],e[d+1],e[d+2],e[d+3]),b=p(r,i,o,a,e[y+0],e[y+1],e[y+2],e[y+3]),w=p(r,i,o,a,e[v+0],e[v+1],e[v+2],e[v+3]),_=p(r,i,o,a,e[m+0],e[m+1],e[m+2],e[m+3]);g&&c.push(d,l+1),b&&c.push(y,l+1),w&&c.push(v,l+1),_&&c.push(m,l+1)}}return u}(5,this.data,this.containers,t,e,Math.abs(t-n)||Math.abs(e-r),i);return this.cache=a,this.cache}}])&&f(e.prototype,n),r&&f(e,r),t}(),m=n(4),g=n(8),b=n(7),w=n.n(b);function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e,n){return e&&x(t.prototype,e),n&&x(t,n),t}var A=function(){function t(e,n){_(this,t),this.index=e,this.x=0,this.y=0,this.size=2,this.color=n.defaultNodeColor,this.hidden=!1,this.label=""}return E(t,[{key:"assign",value:function(t){"x"in t&&(this.x=t.x),"y"in t&&(this.y=t.y),"size"in t&&(this.size=t.size),"color"in t&&(this.color=t.color),"hidden"in t&&(this.hidden=t.hidden),"label"in t&&(this.label=t.label)}}]),t}(),L=function(){function t(e,n){_(this,t),this.index=e,this.size=1,this.color=n.defaultEdgeColor,this.hidden=!1}return E(t,[{key:"assign",value:function(t){"size"in t&&(this.size=t.size),"color"in t&&(this.color=t.color),"hidden"in t&&(this.hidden=t.hidden)}}]),t}();function T(t,e,n){var r="VERTEX"===t?e.VERTEX_SHADER:e.FRAGMENT_SHADER,i=e.createShader(r);if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(i);throw e.deleteShader(i),new Error("sigma/renderers/webgl/shaders/utils.loadShader: error while compiling the shader:\n".concat(o,"\n").concat(n))}return i}var S=T.bind(null,"VERTEX"),O=T.bind(null,"FRAGMENT");function k(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F(t,e,n){return e&&R(t.prototype,e),n&&R(t,n),t}var M=function(){function t(e,n,r){P(this,t),this.vertexShaderSource=n,this.fragmentShaderSource=r,this.load(e)}return F(t,[{key:"load",value:function(t){return this.vertexShader=S(t,this.vertexShaderSource),this.fragmentShader=O(t,this.fragmentShaderSource),this.program=function(t,e){var n,r,i=t.createProgram();for(n=0,r=e.length;n<r;n++)t.attachShader(i,e[n]);if(t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw t.deleteProgram(i),new Error("sigma/renderers/webgl/shaders/utils.loadProgram: error while linking the program.");return i}(t,[this.vertexShader,this.fragmentShader]),this.program}}]),t}();function j(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function N(t,e,n){return t[0]=e,t[4]=arguments.length>2?n:e,t}function C(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=t[6],u=t[7],l=t[8],h=e[0],f=e[1],d=e[2],p=e[3],y=e[4],v=e[5],m=e[6],g=e[7],b=e[8];return t[0]=h*n+f*o+d*c,t[1]=h*r+f*a+d*u,t[2]=h*i+f*s+d*l,t[3]=p*n+y*o+v*c,t[4]=p*r+y*a+v*u,t[5]=p*i+y*s+v*l,t[6]=m*n+g*o+b*c,t[7]=m*r+g*a+b*u,t[8]=m*i+g*s+b*l,t}var D={},I=new Int8Array(4),z=new Int32Array(I.buffer,0,1),U=new Float32Array(I.buffer,0,1),B=/^\s*rgba?\s*\(/,G=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function Y(t){if(void 0!==D[t])return D[t];var e=0,n=0,r=0,i=1;if("#"===t[0])4===t.length?(e=parseInt(t.charAt(1)+t.charAt(1),16),n=parseInt(t.charAt(2)+t.charAt(2),16),r=parseInt(t.charAt(3)+t.charAt(3),16)):(e=parseInt(t.charAt(1)+t.charAt(2),16),n=parseInt(t.charAt(3)+t.charAt(4),16),r=parseInt(t.charAt(5)+t.charAt(6),16));else if(B.test(t)){var o=t.match(G);e=+o[1],n=+o[2],r=+o[3],o[4]&&(i=+o[4])}var a=4278190079&((i=255*i|0)<<24|r<<16|n<<8|e);z[0]=a;var s=U[0];return D[t]=s,s}function V(t,e){var n,r,i,o,a=t.angle,s=t.ratio,c=t.x,u=t.y,l=e.width,h=e.height,f=j(),d=Math.min(l,h),p=function(t,e,n){return t[6]=e,t[7]=n,t}(j(),-c,-u),y=N(j(),1/s),v=(n=j(),r=-a,i=Math.sin(r),o=Math.cos(r),n[0]=o,n[1]=i,n[3]=-i,n[4]=o,n);return C(f,N(j(),d/l*2,d/h*2)),C(f,v),C(f,y),C(f,p),f}function H(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||!!t.getExtension("OES_element_index_uint")}var W=n(12),X=n.n(W),q=n(13),K=n.n(q);function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Z(t,e){return!e||"object"!==$(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var et=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Z(this,J(e).call(this,t,X.a,K.a))).gl=t,n.array=null,n.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,n.buffer);var r=n.program;return n.positionLocation=t.getAttribLocation(r,"a_position"),n.sizeLocation=t.getAttribLocation(r,"a_size"),n.colorLocation=t.getAttribLocation(r,"a_color"),n.matrixLocation=t.getUniformLocation(r,"u_matrix"),n.ratioLocation=t.getUniformLocation(r,"u_ratio"),n.scaleLocation=t.getUniformLocation(r,"u_scale"),t.enableVertexAttribArray(n.positionLocation),t.enableVertexAttribArray(n.sizeLocation),t.enableVertexAttribArray(n.colorLocation),t.vertexAttribPointer(n.positionLocation,2,t.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(n.sizeLocation,1,t.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(n.colorLocation,4,t.UNSIGNED_BYTE,!0,4*Float32Array.BYTES_PER_ELEMENT,12),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(e,t),n=e,(r=[{key:"allocate",value:function(t){this.array=new Float32Array(4*t)}},{key:"process",value:function(t,e){var n=Y(t.color),r=1*e*4,i=this.array;if(t.hidden)return i[r++]=0,i[r++]=0,i[r++]=0,void(i[r++]=0);i[r++]=t.x,i[r++]=t.y,i[r++]=t.size,i[r]=n}},{key:"bufferData",value:function(){var t=this.gl;t.bufferData(t.ARRAY_BUFFER,this.array,t.DYNAMIC_DRAW)}},{key:"render",value:function(t){var e=this.gl,n=this.program;e.useProgram(n),e.uniform1f(this.ratioLocation,1/Math.pow(t.ratio,t.nodesPowRatio)),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.drawArrays(e.POINTS,0,this.array.length/4)}}])&&Q(n.prototype,r),i&&Q(n,i),e}(M),nt=n(14),rt=n.n(nt),it=n(6),ot=n.n(it);function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ct(t,e){return!e||"object"!==at(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ut(t){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ht=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ct(this,ut(e).call(this,t,rt.a,ot.a))).gl=t,n.array=null,n.indicesArray=null,n.buffer=t.createBuffer(),n.indicesBuffer=t.createBuffer(),n.positionLocation=t.getAttribLocation(n.program,"a_position"),n.normalLocation=t.getAttribLocation(n.program,"a_normal"),n.thicknessLocation=t.getAttribLocation(n.program,"a_thickness"),n.colorLocation=t.getAttribLocation(n.program,"a_color"),n.resolutionLocation=t.getUniformLocation(n.program,"u_resolution"),n.ratioLocation=t.getUniformLocation(n.program,"u_ratio"),n.matrixLocation=t.getUniformLocation(n.program,"u_matrix"),n.scaleLocation=t.getUniformLocation(n.program,"u_scale"),n.bind(),n.canUse32BitsIndices=H(t),n.IndicesArray=n.canUse32BitsIndices?Uint32Array:Uint16Array,n.indicesType=n.canUse32BitsIndices?t.UNSIGNED_INT:t.UNSIGNED_SHORT,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}(e,t),n=e,(r=[{key:"bind",value:function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.thicknessLocation),t.enableVertexAttribArray(this.colorLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.thicknessLocation,1,t.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,6*Float32Array.BYTES_PER_ELEMENT,20)}},{key:"allocate",value:function(t){this.array=new Float32Array(24*t)}},{key:"process",value:function(t,e,n,r){if(t.hidden||e.hidden||n.hidden)for(var i=24*r,o=i+24;i<o;i++)this.array[i]=0;else{var a=n.size||1,s=t.x,c=t.y,u=e.x,l=e.y,h=Y(n.color),f=u-s,d=l-c,p=f*f+d*d,y=0,v=0;p&&(y=-d*(p=1/Math.sqrt(p)),v=f*p);var m=24*r,g=this.array;g[m++]=s,g[m++]=c,g[m++]=y,g[m++]=v,g[m++]=a,g[m++]=h,g[m++]=s,g[m++]=c,g[m++]=-y,g[m++]=-v,g[m++]=a,g[m++]=h,g[m++]=u,g[m++]=l,g[m++]=y,g[m++]=v,g[m++]=a,g[m++]=h,g[m++]=u,g[m++]=l,g[m++]=-y,g[m++]=-v,g[m++]=a,g[m]=h}}},{key:"computeIndices",value:function(){for(var t=this.array.length/6,e=t+t/2,n=new this.IndicesArray(e),r=0,i=0;r<t;r+=4)n[i++]=r,n[i++]=r+1,n[i++]=r+2,n[i++]=r+2,n[i++]=r+1,n[i++]=r+3;this.indicesArray=n}},{key:"bufferData",value:function(){var t=this.gl;t.bufferData(t.ARRAY_BUFFER,this.array,t.DYNAMIC_DRAW),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indicesArray,t.STATIC_DRAW)}},{key:"render",value:function(t){var e=this.gl,n=this.program;e.useProgram(n),e.uniform2f(this.resolutionLocation,t.width,t.height),e.uniform1f(this.ratioLocation,t.ratio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.scaleLocation,t.scalingRatio),e.drawElements(e.TRIANGLES,this.indicesArray.length,this.indicesType,0)}}])&&st(n.prototype,r),i&&st(n,i),e}(M),ft=n(15),dt=n.n(ft),pt=n(16),yt=n.n(pt);function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gt(t,e){return!e||"object"!==vt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bt(t){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _t=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=gt(this,bt(e).call(this,t,dt.a,yt.a))).gl=t,n.array=null,n.buffer=t.createBuffer(),n.positionLocation=t.getAttribLocation(n.program,"a_position"),n.normalLocation=t.getAttribLocation(n.program,"a_normal"),n.thicknessLocation=t.getAttribLocation(n.program,"a_thickness"),n.radiusLocation=t.getAttribLocation(n.program,"a_radius"),n.colorLocation=t.getAttribLocation(n.program,"a_color"),n.barycentricLocation=t.getAttribLocation(n.program,"a_barycentric"),n.resolutionLocation=t.getUniformLocation(n.program,"u_resolution"),n.ratioLocation=t.getUniformLocation(n.program,"u_ratio"),n.matrixLocation=t.getUniformLocation(n.program,"u_matrix"),n.scaleLocation=t.getUniformLocation(n.program,"u_scale"),n.bind(),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wt(t,e)}(e,t),n=e,(r=[{key:"bind",value:function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.thicknessLocation),t.enableVertexAttribArray(this.radiusLocation),t.enableVertexAttribArray(this.colorLocation),t.enableVertexAttribArray(this.barycentricLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,10*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,10*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.thicknessLocation,1,t.FLOAT,!1,10*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(this.radiusLocation,1,t.FLOAT,!1,10*Float32Array.BYTES_PER_ELEMENT,20),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,10*Float32Array.BYTES_PER_ELEMENT,24),t.vertexAttribPointer(this.barycentricLocation,3,t.FLOAT,!1,10*Float32Array.BYTES_PER_ELEMENT,28)}},{key:"allocate",value:function(t){this.array=new Float32Array(30*t)}},{key:"process",value:function(t,e,n,r){if(t.hidden||e.hidden||n.hidden)for(var i=30*r,o=i+30;i<o;i++)this.array[i]=0;else{var a=Math.max(2.5*(n.size||1),5),s=e.size||1,c=t.x,u=t.y,l=e.x,h=e.y,f=Y(n.color),d=l-c,p=h-u,y=d*d+p*p,v=0,m=0;y&&(v=-p*(y=1/Math.sqrt(y)),m=d*y);var g=30*r,b=this.array;b[g++]=l,b[g++]=h,b[g++]=-v,b[g++]=-m,b[g++]=a,b[g++]=s,b[g++]=f,b[g++]=1,b[g++]=0,b[g++]=0,b[g++]=l,b[g++]=h,b[g++]=-v,b[g++]=-m,b[g++]=a,b[g++]=s,b[g++]=f,b[g++]=0,b[g++]=1,b[g++]=0,b[g++]=l,b[g++]=h,b[g++]=-v,b[g++]=-m,b[g++]=a,b[g++]=s,b[g++]=f,b[g++]=0,b[g++]=0,b[g]=1}}},{key:"bufferData",value:function(){var t=this.gl;t.bufferData(t.ARRAY_BUFFER,this.array,t.DYNAMIC_DRAW)}},{key:"render",value:function(t){var e=this.gl,n=this.program;e.useProgram(n),e.uniform2f(this.resolutionLocation,t.width,t.height),e.uniform1f(this.ratioLocation,t.ratio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.scaleLocation,t.scalingRatio),e.drawArrays(e.TRIANGLES,0,this.array.length/10)}}])&&mt(n.prototype,r),i&&mt(n,i),e}(M),xt=n(17),Et=n.n(xt);function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tt(t,e){return!e||"object"!==At(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function St(t){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ot(t,e){return(Ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kt,Pt=(kt=[function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Tt(this,St(e).call(this,t,Et.a,ot.a))).gl=t,n.array=null,n.indicesArray=null,n.buffer=t.createBuffer(),n.indicesBuffer=t.createBuffer(),n.positionLocation=t.getAttribLocation(n.program,"a_position"),n.normalLocation=t.getAttribLocation(n.program,"a_normal"),n.thicknessLocation=t.getAttribLocation(n.program,"a_thickness"),n.colorLocation=t.getAttribLocation(n.program,"a_color"),n.radiusLocation=t.getAttribLocation(n.program,"a_radius"),n.resolutionLocation=t.getUniformLocation(n.program,"u_resolution"),n.ratioLocation=t.getUniformLocation(n.program,"u_ratio"),n.matrixLocation=t.getUniformLocation(n.program,"u_matrix"),n.scaleLocation=t.getUniformLocation(n.program,"u_scale"),n.bind(),n.canUse32BitsIndices=H(t),n.IndicesArray=n.canUse32BitsIndices?Uint32Array:Uint16Array,n.indicesType=n.canUse32BitsIndices?t.UNSIGNED_INT:t.UNSIGNED_SHORT,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ot(t,e)}(e,t),n=e,(r=[{key:"bind",value:function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.thicknessLocation),t.enableVertexAttribArray(this.colorLocation),t.enableVertexAttribArray(this.radiusLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.thicknessLocation,1,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,7*Float32Array.BYTES_PER_ELEMENT,20),t.vertexAttribPointer(this.radiusLocation,1,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,24)}},{key:"allocate",value:function(t){this.array=new Float32Array(28*t)}},{key:"process",value:function(t,e,n,r){if(t.hidden||e.hidden||n.hidden)for(var i=28*r,o=i+28;i<o;i++)this.array[i]=0;else{var a=n.size||1,s=t.x,c=t.y,u=e.x,l=e.y,h=e.size||1,f=Y(n.color),d=u-s,p=l-c,y=d*d+p*p,v=0,m=0;y&&(v=-p*(y=1/Math.sqrt(y)),m=d*y);var g=28*r,b=this.array;b[g++]=s,b[g++]=c,b[g++]=v,b[g++]=m,b[g++]=a,b[g++]=f,b[g++]=0,b[g++]=s,b[g++]=c,b[g++]=-v,b[g++]=-m,b[g++]=a,b[g++]=f,b[g++]=0,b[g++]=u,b[g++]=l,b[g++]=v,b[g++]=m,b[g++]=a,b[g++]=f,b[g++]=h,b[g++]=u,b[g++]=l,b[g++]=-v,b[g++]=-m,b[g++]=a,b[g++]=f,b[g]=-h}}},{key:"computeIndices",value:function(){for(var t=this.array.length/7,e=t+t/2,n=new this.IndicesArray(e),r=0,i=0;r<t;r+=4)n[i++]=r,n[i++]=r+1,n[i++]=r+2,n[i++]=r+2,n[i++]=r+1,n[i++]=r+3;this.indicesArray=n}},{key:"bufferData",value:function(){var t=this.gl;t.bufferData(t.ARRAY_BUFFER,this.array,t.DYNAMIC_DRAW),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indicesArray,t.STATIC_DRAW)}},{key:"render",value:function(t){var e=this.gl,n=this.program;e.useProgram(n),e.uniform2f(this.resolutionLocation,t.width,t.height),e.uniform1f(this.ratioLocation,t.ratio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.scaleLocation,t.scalingRatio),e.drawElements(e.TRIANGLES,this.indicesArray.length,this.indicesType,0)}}])&&Lt(n.prototype,r),i&&Lt(n,i),e}(M),_t],function(){function t(e){P(this,t),this.programs=kt.map((function(t){return new t(e)}))}return F(t,[{key:"allocate",value:function(t){this.programs.forEach((function(e){return e.allocate(t)}))}},{key:"process",value:function(){var t=arguments;this.programs.forEach((function(e){return e.process.apply(e,k(t))}))}},{key:"computeIndices",value:function(){this.programs.forEach((function(t){"function"==typeof t.computeIndices&&t.computeIndices()}))}},{key:"bufferData",value:function(){this.programs.forEach((function(t){return t.bufferData()}))}},{key:"render",value:function(){var t=arguments;this.programs.forEach((function(e){e.bind(),e.bufferData(),e.render.apply(e,k(t))}))}}]),t}()),Rt=n(5),Ft=n(2),Mt={width:250,height:175},jt={width:400,height:300};function Nt(t,e,n){return n.sort((function(t,n){var r=e(t)||0,i=e(n)||0;return r<i?-1:r>i?1:0}))}function Ct(t,e,n){var r=n.labelSize,i=n.labelFont,o=n.labelWeight;t.fillStyle="#000",t.font="".concat(o," ").concat(r,"px ").concat(i),t.fillText(e.label,e.x+e.size+3,e.y+r/3)}var Dt=2*Math.PI;function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var zt={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelGrid:{cell:null,renderedSizeThreshold:-1/0},nodeReducer:null,edgeReducer:null,zIndex:!1,labelRenderer:Ct,hoverRenderer:function(t,e,n){var r=n.labelSize,i=n.labelFont,o=n.labelWeight;t.font="".concat(o," ").concat(r,"px ").concat(i),t.beginPath(),t.fillStyle="#fff",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor="#000";var a=t.measureText(e.label).width,s=Math.round(e.x-r/2-2),c=Math.round(e.y-r/2-2),u=Math.round(a+r/2+e.size+9),l=Math.round(r+4),h=Math.round(r/2+2);t.moveTo(s,c+h),t.moveTo(s,c+h),t.arcTo(s,c,s+h,c,h),t.lineTo(s+u,c),t.lineTo(s+u,c+l),t.lineTo(s+h,c+l),t.arcTo(s,c+l,s,c+l-h,h),t.lineTo(s,c+h),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,function(t,e){t.fillStyle=e.color,t.beginPath(),t.arc(e.x,e.y,e.size,0,Dt,!0),t.closePath(),t.fill()}(t,e),Ct(t,e,n)}};function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gt(t,e){return!e||"object"!==Ut(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vt(t,e){return(Vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ht=Object(Ft.c)(),Wt=Object(Ft.c)(),Xt=function(t){function e(t,n,r){var i;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=r||{},(i=Gt(this,Yt(e).call(this))).settings=Object(Rt.a)({},zt,r),function(t){if(t.labelGrid&&t.labelGrid.cell&&"object"===It(t.labelGrid.cell)&&(!t.labelGrid.cell.width||!t.labelGrid.cell.height))throw new Error("sigma/renderers/webgl/settings: invalid `labelGrid.cell`. Expecting {width, height}.")}(i.settings),!w()(t))throw new Error("sigma/renderers/webgl: invalid graph instance.");if(!(n instanceof HTMLElement))throw new Error("sigma/renderers/webgl: container should be an html element.");i.graph=t,i.captors={},i.container=n,i.elements={},i.contexts={},i.listeners={},i.quadtree=new v,i.nodeDataCache={},i.edgeDataCache={},i.nodeExtent=null,i.edgeExtent=null,i.initializeCache(),i.normalizationFunction=null,i.width=0,i.height=0,i.highlightedNodes=new Set,i.displayedLabels=new Set,i.hoveredNode=null,i.wasRenderedInThisFrame=!1,i.renderFrame=null,i.renderHighlightedNodesFrame=null,i.needToProcess=!1,i.needToSoftProcess=!1,i.createContext("edges"),i.createContext("nodes"),i.createContext("labels",!1),i.createContext("hovers",!1),i.createContext("mouse",!1);var o=i.contexts.nodes;return o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enable(o.BLEND),(o=i.contexts.edges).blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enable(o.BLEND),i.nodePrograms={circle:new et(i.contexts.nodes)},i.edgePrograms={arrow:new Pt(i.contexts.edges),line:new ht(i.contexts.edges)},i.resize(),i.camera=new u.a({width:i.width,height:i.height}),i.bindCameraHandlers(),i.captors={mouse:new m.a(i.elements.mouse,i.camera)},i.bindEventHandlers(),i.bindGraphHandlers(),i.process(),i.render(),i}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vt(t,e)}(e,t),n=e,(r=[{key:"createContext",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(Ft.a)("canvas",{class:"sigma-".concat(t),style:{position:"absolute"}});this.elements[t]=n,this.container.appendChild(n);var r,i={preserveDrawingBuffer:!1,antialias:!1};return e?((r=n.getContext("webgl2",i))||(r=n.getContext("webgl",i)),r||(r=n.getContext("experimental-webgl",i))):r=n.getContext("2d",i),this.contexts[t]=r,this}},{key:"initializeCache",value:function(){for(var t=this.graph,e=t.nodes(),n=0,r=e.length;n<r;n++)this.nodeDataCache[e[n]]=new A(n,this.settings);for(var i=t.edges(),o=0,a=i.length;o<a;o++)this.edgeDataCache[i[o]]=new L(o,this.settings)}},{key:"bindCameraHandlers",value:function(){var t=this;return this.listeners.camera=function(){t.scheduleRender()},this.camera.on("updated",this.listeners.camera),this}},{key:"bindEventHandlers",value:function(){var t=this;this.listeners.handleResize=function(){t.needToSoftProcess=!0,t.scheduleRender()},window.addEventListener("resize",this.listeners.handleResize);var e=function(t,e,n,r,i){return t>n-i&&t<n+i&&e>r-i&&e<r+i&&Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))<i},n=function(e,n){var r=t.camera.viewportToGraph(t,e,n);return t.quadtree.point(r.x,1-r.y)};return this.listeners.handleMove=function(r){for(var i=Math.pow(t.camera.getState().ratio,.5),o=n(r.x,r.y),a=1/0,s=null,c=0,u=o.length;c<u;c++){var l=o[c],h=t.nodeDataCache[l],f=t.camera.graphToViewport(t,h.x,h.y),d=h.size/i;if(e(r.x,r.y,f.x,f.y,d)){var p=Math.sqrt(Math.pow(r.x-f.x,2)+Math.pow(r.y-f.y,2));p<a&&(a=p,s=l)}}if(s&&t.hoveredNode!==s)return t.hoveredNode=s,t.emit("enterNode",{node:s}),t.scheduleHighlightedNodesRender();if(t.hoveredNode){var y=t.nodeDataCache[t.hoveredNode],v=t.camera.graphToViewport(t,y.x,y.y),m=y.size/i;if(!e(r.x,r.y,v.x,v.y,m)){var g=t.hoveredNode;return t.hoveredNode=null,t.emit("leaveNode",{node:g}),t.scheduleHighlightedNodesRender()}}},this.listeners.handleClick=function(r){for(var i=Math.pow(t.camera.getState().ratio,.5),o=n(r.x,r.y),a=0,s=o.length;a<s;a++){var c=o[a],u=t.nodeDataCache[c],l=t.camera.graphToViewport(t,u.x,u.y),h=u.size/i;if(e(r.x,r.y,l.x,l.y,h))return t.emit("clickNode",{node:c,captor:r})}return t.emit("clickStage")},this.captors.mouse.on("mousemove",this.listeners.handleMove),this.captors.mouse.on("click",this.listeners.handleClick),this}},{key:"bindGraphHandlers",value:function(){var t=this,e=this.graph;return this.listeners.graphUpdate=function(){t.needToProcess=!0,t.scheduleRender()},this.listeners.softGraphUpdate=function(){t.needToSoftProcess=!0,t.scheduleRender()},this.listeners.addNodeGraphUpdate=function(n){t.nodeDataCache[n.key]=new A(e.order-1,t.settings),t.listeners.graphUpdate()},this.listeners.addEdgeGraphUpdate=function(n){t.edgeDataCache[n.key]=new L(e.size-1,t.settings),t.listeners.graphUpdate()},e.on("nodeAdded",this.listeners.addNodeGraphUpdate),e.on("nodeDropped",this.listeners.graphUpdate),e.on("nodeAttributesUpdated",this.listeners.softGraphUpdate),e.on("edgeAdded",this.listeners.addEdgeGraphUpdate),e.on("nodeDropped",this.listeners.graphUpdate),e.on("edgeAttributesUpdated",this.listeners.softGraphUpdate),e.on("cleared",this.listeners.graphUpdate),this}},{key:"process",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.graph,n=this.settings;this.quadtree.clear();var r=["x","y"];this.settings.zIndex&&(r.push("z"),this.edgeExtent=Object(g.edgeExtent)(e,["z"])),this.nodeExtent=Object(g.nodeExtent)(e,r),this.normalizationFunction=Object(Ft.b)(this.nodeExtent);var i=this.nodePrograms[this.settings.defaultNodeType];t||i.allocate(e.order);var o=e.nodes();this.settings.zIndex&&(o=Nt(this.edgeExtent.z,(function(t){return e.getNodeAttribute(t,"z")}),o));for(var a=0,s=o.length;a<s;a++){var c=o[a],u=e.getNodeAttributes(c),l=this.nodeDataCache[c];n.nodeReducer&&(u=n.nodeReducer(c,u)),l.assign(u),this.normalizationFunction.applyTo(l),this.quadtree.add(c,l.x,1-l.y,l.size/this.width),i.process(l,a),l.index=a}i.bufferData();var h=this.edgePrograms[this.settings.defaultEdgeType];t||h.allocate(e.size);var f=e.edges();this.settings.zIndex&&(f=Nt(this.edgeExtent.z,(function(t){return e.getEdgeAttribute(t,"z")}),f));for(var d=0,p=f.length;d<p;d++){var y=f[d],v=e.getEdgeAttributes(y),m=this.edgeDataCache[y];n.edgeReducer&&(v=n.edgeReducer(y,v)),m.assign(v);var b=e.extremities(y),w=this.nodeDataCache[b[0]],_=this.nodeDataCache[b[1]];h.process(w,_,m,d),m.index=d}return t||"function"!=typeof h.computeIndices||h.computeIndices(),h.bufferData(),this}},{key:"processNode",value:function(t){var e=this.nodePrograms[this.settings.defaultNodeType],n=this.graph.getNodeAttributes(t);return e.process(n,this.nodeDataCache[t].index),this}},{key:"processEdge",value:function(t){var e=this.graph,n=this.edgePrograms[this.settings.defaultEdgeType],r=e.getEdgeAttributes(t),i=e.extremities(t),o=e.getNodeAttributes(i[0]),a=e.getNodeAttributes(i[1]);return n.process(o,a,r,this.edgeDataCache[t].index),this}},{key:"getCamera",value:function(){return this.camera}},{key:"getMouseCaptor",value:function(){return this.captors.mouse}},{key:"resize",value:function(t,e){var n=this.width,r=this.height;if(arguments.length>1?(this.width=t,this.height=e):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight),0===this.width)throw new Error("sigma/renderers/webgl: container has no width.");if(0===this.height)throw new Error("sigma/renderers/webgl: container has no height.");if(n===this.width&&r===this.height)return this;for(var i in this.elements){var o=this.elements[i];o.style.width=this.width+"px",o.style.height=this.height+"px"}for(var a in this.contexts){var s=this.contexts[a];s.scale?(this.elements[a].setAttribute("width",this.width*Ht+"px"),this.elements[a].setAttribute("height",this.height*Ht+"px"),1!==Ht&&s.scale(Ht,Ht)):(this.elements[a].setAttribute("width",this.width*Wt+"px"),this.elements[a].setAttribute("height",this.height*Wt+"px")),s.viewport&&s.viewport(0,0,this.width*Wt,this.height*Wt)}return this}},{key:"clear",value:function(){return this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT),this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT),this.contexts.labels.clearRect(0,0,this.width,this.height),this.contexts.hovers.clearRect(0,0,this.width,this.height),this}},{key:"render",value:function(){if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear(),!this.graph.order)return this;var t,e=this.camera.isAnimated()||this.captors.mouse.isMoving||this.captors.mouse.hasDragged||this.captors.mouse.wheelLock,n=this.camera.getState(),r=V(n,{width:this.width,height:this.height});if(this.nodePrograms[this.settings.defaultNodeType].render({matrix:r,width:this.width,height:this.height,ratio:n.ratio,nodesPowRatio:.5,scalingRatio:Wt}),this.settings.hideEdgesOnMove&&e||this.edgePrograms[this.settings.defaultEdgeType].render({matrix:r,width:this.width,height:this.height,ratio:n.ratio,nodesPowRatio:.5,edgesPowRatio:.5,scalingRatio:Wt}),this.settings.hideLabelsOnMove&&e)return this;if(n.ratio>=1)t=this.graph.nodes();else{var i=this.camera.viewRectangle(this);t=this.quadtree.rectangle(i.x1,1-i.y1,i.x2,1-i.y2,i.height)}if(!this.settings.renderLabels)return this;for(var o=this.settings.labelGrid,a=function(t){var e=t.cache,n=t.camera,r=t.cell,i=t.dimensions,o=t.displayedLabels,a=t.fontSize,s=void 0===a?14:a,c=t.graph,l=t.renderedSizeThreshold,h=void 0===l?-1/0:l,f=t.visibleNodes,d=n.getState(),p=n.getPreviousState(),y=new u.a;y.setState(p);var v=Math.pow(d.ratio,.5),m=d.x===p.x&&d.y===p.y&&d.ratio===p.ratio,g=d.ratio<p.ratio,b=d.x!==p.x||d.y!==p.y,w=d.ratio>p.ratio,_=!g&&!w&&d.ratio>=1,x=b&&o.size&&!g&&!w;if(w&&Math.trunc(100*d.ratio)%5!=0)return Array.from(o);if((_||m)&&0!==o.size)return Array.from(o);if(g&&d.ratio>=1)return Array.from(o);var E=r||Mt;d.ratio>=1.3&&(E=jt);for(var A=i.width%E.width,L=E.width+A/Math.floor(i.width/E.width),T=i.height%E.height,S=E.height+T/Math.floor(i.height/E.height),O=i.width+L,k=i.height+S,P=-L,R=-S,F=i.width+L/2,M=i.height+S/2,j=-L/2,N=-S/2,C=[],D={},I=-1/0,z=null,U=0,B=f.length;U<B;U++){var G=f[U],Y=e[G];if(!(Y.size/v<h)){var V=n.graphToViewport(i,Y.x,Y.y);if(!(V.x<P||V.x>O||V.y<R||V.y>k)){if(Y.size>I&&(I=Y.size,z=G),x){var H=y.graphToViewport(i,Y.x,Y.y);if(H.x>=j&&H.x<=F&&H.y>=N&&H.y<=M&&!o.has(G))continue}var W=Math.floor(V.x/L),X=Math.floor(V.y/S),q="".concat(W,"§").concat(X);if(void 0===D[q])D[q]=G;else{var K=D[q],$=e[K];if(o.size>0){var Q=o.has(G),Z=o.has(K);if(!Q&&Z)continue;if(Q&&!Z){D[q]=G;continue}if((x||g)&&Q&&Z){C.push(G);continue}}var J=!1;if(Y.size>$.size)J=!0;else if(Y.size===$.size){var tt=c.degree(G),et=c.degree(K);tt>et?J=!0:tt===et&&G>K&&(J=!0)}J&&(D[q]=G)}}}}var nt=C.some((function(t){return t===z}));for(var rt in D){var it=D[rt];it===z&&(nt=!0),C.push(it)}!nt&&z&&C.push(z);for(var ot,at,st,ct,ut,lt,ht,ft,dt=new Set,pt=0,yt=C.length;pt<yt;pt++){var vt=C[pt],mt=e[vt],gt=n.graphToViewport(i,mt.x,mt.y);if(!dt.has(vt))for(var bt=pt+1;bt<yt;bt++){var wt=C[bt],_t=e[wt],xt=n.graphToViewport(i,_t.x,_t.y);ot=gt.x,at=gt.y,st=8*mt.label.length,ct=s,ut=xt.x,lt=xt.y,ht=8*_t.label.length,ft=s,ot<ut+ht&&ot+st>ut&&at<lt+ft&&at+ct>lt&&(mt.size<_t.size?dt.add(vt):dt.add(wt))}}return C.filter((function(t){return!dt.has(t)}))}({cache:this.nodeDataCache,camera:this.camera,cell:o.cell,dimensions:this,displayedLabels:this.displayedLabels,fontSize:this.settings.labelSize,graph:this.graph,renderedSizeThreshold:o.renderedSizeThreshold,visibleNodes:t}),s=this.contexts.labels,c=Math.pow(n.ratio,.5),l=0,h=a.length;l<h;l++){var f=this.nodeDataCache[a[l]],d=this.camera.graphToViewport(this,f.x,f.y),p=d.x,y=d.y,v=f.size/c;this.settings.labelRenderer(s,{key:a[l],label:f.label,size:v,x:p,y:y},this.settings)}return this.displayedLabels=new Set(a),this.renderHighlightedNodes(),this}},{key:"renderHighlightedNodes",value:function(){var t=this,e=this.camera,n=Math.pow(e.getState().ratio,.5),r=this.contexts.hovers;r.clearRect(0,0,this.width,this.height);var i=function(i){var o=t.nodeDataCache[i],a=e.graphToViewport(t,o.x,o.y),s=a.x,c=a.y,u=o.size/n;t.settings.hoverRenderer(r,{key:i,label:o.label,color:o.color,size:u,x:s,y:c},t.settings)};this.hoveredNode&&i(this.hoveredNode),this.highlightedNodes.forEach(i)}},{key:"scheduleRender",value:function(){var t=this;if(this.renderFrame)return this;this.renderFrame=requestAnimationFrame((function(){t.needToProcess?t.process():t.needToSoftProcess&&t.process(!0),t.renderFrame=null,t.needToProcess=!1,t.needToSoftProcess=!1,t.render()}))}},{key:"scheduleHighlightedNodesRender",value:function(){var t=this;if(this.renderHighlightedNodesFrame||this.renderFrame)return this;this.renderHighlightedNodesFrame=requestAnimationFrame((function(){t.renderHighlightedNodesFrame=null,t.renderHighlightedNodes()}))}},{key:"refresh",value:function(){return this.needToSoftProcess=!0,this.scheduleRender(),this}},{key:"highlightNode",value:function(t){return this.highlightedNodes.add(t),this.scheduleHighlightedNodesRender(),this}},{key:"unhighlightNode",value:function(t){return this.highlightedNodes.delete(t),this.scheduleHighlightedNodesRender(),this}},{key:"kill",value:function(){var t=this.graph;this.camera.removeListener("updated",this.listeners.camera),window.removeEventListener("resize",this.listeners.handleResize),this.captors.mouse.kill(),t.removeListener("nodeAdded",this.listeners.addNodeGraphUpdate),t.removeListener("nodeDropped",this.listeners.graphUpdate),t.removeListener("nodeAttributesUpdated",this.listeners.softGraphUpdate),t.removeListener("edgeAdded",this.listeners.addEdgeGraphUpdate),t.removeListener("nodeDropped",this.listeners.graphUpdate),t.removeListener("edgeAttributesUpdated",this.listeners.softGraphUpdate),t.removeListener("cleared",this.listeners.graphUpdate),this.quadtree=null,this.nodeDataCache=null,this.edgeDataCache=null,this.highlightedNodes=null,this.previousVisibleNodes=null,this.displayedLabels=null,this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild)}}])&&Bt(n.prototype,r),i&&Bt(n,i),e}(c);n.d(e,"Renderer",(function(){return c})),n.d(e,"Camera",(function(){return u.a})),n.d(e,"QuadTree",(function(){return v})),n.d(e,"MouseCaptor",(function(){return m.a})),n.d(e,"WebGLRenderer",(function(){return Xt}))}])}));